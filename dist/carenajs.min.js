/**
 * Convenient methods for manipulating arrays and collections
 * @version v0.1.1 - 2015-08-01
 * @author Oscar Ponce <oscar@opb.mx>
 * @license http://www.apache.org/licenses/LICENSE-2.0
 **/
(function(){"use strict";function a(a,b,c){return h(c)&&(c=0),0>b||b>=a.length?c:a[b]}function b(b){function c(b,c){for(var d=0,e=0;e<b.length;e++)d+=a(b[e],c);return d}for(var d=new Array(b[0].length),e=0;e<d.length;e++)d[e]=c(b,e);return d}function c(){var a=0,b=arguments.length,c=[];if(0===b)return c;for(c=arguments[0].slice();++a<b;)d(arguments[a],function(a){c.indexOf(a)<0&&c.push(a)});return c}function d(a,b){for(var c=-1,d=a.length;++c<d;)b(a[c],c,a);return a}function e(a,b){for(var c=-1,d=a.length,e=Array(d);++c<d;)e[c]=b(a[c],c,a);return e}function f(a){var b=Object(a),c=[];for(var d in b)A.hasOwnProperty.call(b,d)&&c.push(d);return c}function g(a){return Array.isArray?Array.isArray(a):a&&"object"==typeof a?"number"!=typeof a.length?!1:!0:!1}function h(a){return void 0===a?!0:"undefined"==typeof a?!0:!1}function i(a){for(var b=new Array(a),c=0;a>c;c++)b[c]=0;return b}function j(a){for(var b=new Array(a),c=0;a>c;c++)b[c]=1;return b}function k(a,b){for(var c=[],d=a;b+1>d;)c.push(d),d++;return c}function l(a,b){var c=a.slice(),d=function(a,b){return a-b};return b&&(d=function(a,c){return b(a)-b(c)}),c.sort(d),c}function m(a,b,c,d,e){for(e||(e=function(a,b){return b>a});c>b;){var f=c+(b-c>>1);e(d,a[f])?c=f:b=f+1}return b}function n(a,b){return m(a,0,a.length-1,b)}function o(a,b){var c=new Array(a.length);b=b||0;for(var d=0;d<a.length;d++)c[d]=a[d]||b;return c}function p(a){if(arguments.length>1&&g(arguments[0]))return b(arguments);for(var c=0,d=0;d<a.length;d++)c+=a[d];return c}function q(a){if(!a||0===a.length)return-(1/0);for(var b=a[0],c=0;c<a.length;c++)b=Math.max(b,a[c]);return b}function r(a){if(!a||0===a.length)return 1/0;for(var b=a[0],c=0;c<a.length;c++)b=Math.min(b,a[c]);return b}function s(a){return a&&0!==a.length?p(a)/a.length:0}function t(a,b){var c=v(a,b);return s(c)}function u(a,b){for(var c=new Array(b.length),d=0;d<b.length;d++)c[d]=a*b[d];return c}function v(a,b){for(var c=new Array(a.length),d=0;d<a.length;d++)c[d]=a[d]*b[d];return c}function w(a,b){var c=l(a);if(0===c.length)return[];var d=new Array(b+1);d[0]=c[0];for(var e=1;b>=e;e++)d[e]=c[Math.ceil(c.length*e/b)-1];return d}function x(){function a(a,b,e,g){var i,j=f(o);d(j,function(g){i=o[j].metrics;var k=f(i);o[j]===a&&(k=c(k,f(e))),d(k,function(c){var d=h(a,c);d.values.splice(b,0,e[c]||0)})}),m.splice(b,0,g)}function b(a,b,c){d(f(c),function(d){var e=h(a,d);e.values[b]=c[d]})}function g(){var a=f(o);return e(a,function(a){return o[a]})}function h(a,b){return a.metrics[b]||(a.metrics[b]={values:i(l.size)}),a.metrics[b]}function j(a){var b=k(a);return o[b]||(o[b]={dimensions:a,metrics:{}}),o[b]}function k(a){return e(f(a).sort(),function(b){return b+"->"+a[b]}).join("::")}var l=this,m=[],o={};Object.defineProperty(l,"size",{get:function(){return m.length},enumerable:!0,configurable:!1}),Object.defineProperty(l,"timeStamps",{get:function(){return m.slice()},enumerable:!0,configurable:!1}),Object.defineProperty(l,"data",{get:function(){return g()},enumerable:!0,configurable:!1}),this.set=function(c,d,e){var f=n(m,c),g=j(d);f>0&&m[f-1]===c?b(g,f-1,e):a(g,f,e,c)}}function y(){var a=new x;return a}function z(){var a={};return a.isArray=g,a.zeroes=i,a.ones=j,a.range=k,a.min=r,a.max=q,a.sum=p,a.times=u,a.mean=s,a.fill=o,a.wMean=t,a.dTimes=v,a.nTiles=w,a.sort=l,a.tSeries=y,a.sortedIndex=n,a.union=c,a}var A=Object.prototype,B=z();"function"==typeof define&&"object"==typeof define.amd&&define.amd?define(function(){return B}):"undefined"!=typeof module&&null!==module?module.exports=B:"undefined"!=typeof angular&&null!==angular&&angular.module("carena.js",[]).factory("carena",function(){return B})}).call(this);